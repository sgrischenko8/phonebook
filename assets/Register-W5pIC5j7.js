import{u as x,a as p,b as j,c as _,r as c,_ as k,j as e,L as C}from"./index-JpPDPLyv.js";import{C as E,E as b}from"./ErrorMessage-f5fMIsJ3.js";import"./formik.esm-0wzOoevK.js";const L="_main_container_ycomf_1",R={main_container:L},P=()=>{let l=x();const[u]=p(),o=u.get("verificationToken"),[g,{isLoading:f,error:t,isSuccess:m}]=j(),[i,{isLoading:y,error:h,isSuccess:d}]=_(),a=c.useCallback(async()=>{try{await i(o).then(s=>{if(console.log(s,"promise verify"),!s.error){n();const{email:r}=s.data;l("/login",{state:{email:r}})}})}catch(s){console.log(s)}},[o,i]);c.useEffect(()=>{o&&a()},[a,o]);const n=()=>{k.success(d?"You successfully register!":"Check your email for verification link")},v=async s=>{try{await g(s).then(r=>{console.log(r,"promise register"),m&&n()})}catch(r){console.log(r)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:R.main_container,children:[e.jsx("h1",{children:"Phonebook"}),e.jsx(E,{registerHandler:v}),e.jsx("button",{type:"button",onClick:()=>a(),children:"send"})]}),t&&e.jsx(b,{error:t||h,path:"/register"}),f||y?e.jsx(C,{}):null]})};export{P as default};

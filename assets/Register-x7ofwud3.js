import{u as p,a as y,b as x,c as j,r as w,j as e,L,_ as R}from"./index-j16siAm5.js";import{C as b,E as k}from"./ErrorMessage-PtI1mHjm.js";import"./formik.esm-F6oHAoPQ.js";const E="_main_container_1tbts_1",C="_caution_container_1tbts_20",P="_moveUpDown_1tbts_1",S="_moveLeftRigtht_1tbts_1",n={main_container:E,caution_container:C,moveUpDown:P,moveLeftRigtht:S},U=()=>{let a=p();const[c]=y(),r=c.get("verificationToken"),[l,{isLoading:m,error:o,isSuccess:g}]=x(),[u,{isLoading:f,error:_,isSuccess:h}]=j(),v=async()=>{try{await u(r).then(t=>{if(console.log(t,"promise verify"),!t.error){i();const{email:s}=t.data;a("/login",{state:{email:s}})}})}catch(t){console.log(t)}};w.useEffect(()=>{r&&v()},[]);const i=()=>{R.success(h?"You successfully register!":"Check your email for verification link")},d=async t=>{try{await l(t).then(s=>{console.log(s,"promise register"),g&&i()})}catch(s){console.log(s)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.main_container,children:[e.jsx("h1",{children:"Phonebook"}),e.jsx(b,{registerHandler:d}),e.jsx("p",{className:n.caution_container,children:"Please, write real email. Verification procedure goes with the link in the letter"})]}),o&&e.jsx(k,{error:o||_,path:"/register"}),m||f?e.jsx(L,{}):null]})};export{U as default};
